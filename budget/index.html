<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Budget Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>ğŸ’° Budget Tracker</h1>
    <div id="authSection">
      <input type="email" id="emailInput" placeholder="Email" />
      <input type="password" id="passwordInput" placeholder="Password" />
      <button id="loginBtn">Login</button>
      <button id="logoutBtn" style="display:none;">Logout</button>
      <span id="userInfo"></span>
    </div>
  </header>

  <!-- Summary Cards -->
  <section id="summarySection" class="summary-cards">
    <div class="card" id="incomeCard">
      <h3>Income</h3>
      <p id="incomeTotal">$0.00</p>
    </div>
    <div class="card" id="expenseCard">
      <h3>Expenses</h3>
      <p id="expenseTotal">$0.00</p>
    </div>
    <div class="card" id="balanceCard">
      <h3>Balance</h3>
      <p id="balanceTotal">$0.00</p>
    </div>
  </section>

  <!-- Transaction Controls -->
  <section id="controlsSection">
    <button id="importBtn">ğŸ“¥ Import CSV</button>
    <button id="exportCsvBtn">ğŸ“¤ Export CSV</button>
    <button id="exportXlsxBtn">ğŸ“Š Export XLSX</button>
    <button id="refreshBtn">ğŸ”„ Reload</button>
    <button id="remapBtn">ğŸ—‚ï¸ Remap Uncategorized</button>
    <input type="file" id="fileInput" accept=".csv" style="display:none;" />
  </section>

  <!-- Transactions Table -->
  <section id="transactionsSection">
    <h2>ğŸ“‹ Transactions</h2>
    <table id="transactionsTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Description</th>
          <th>Category</th>
          <th>Amount</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="transactionsBody"></tbody>
    </table>
  </section>

  <!-- Charts -->
  <section id="chartsSection">
    <h2>ğŸ“ˆ Spending Overview</h2>
    <canvas id="spendingChart"></canvas>
    <canvas id="incomeExpenseChart"></canvas>
  </section>

  <!-- Uncategorized Summary -->
  <section id="uncategorizedSection">
    <h2>â“ Uncategorized Summary</h2>
    <table id="uncategorizedTable">
      <thead>
        <tr><th>Description</th><th>Count</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Mapping Manager -->
  <section id="mappingSection">
    <h2>ğŸ”– Create / Edit Mappings</h2>
    <div id="mappingForm">
      <label>Transaction Text</label>
      <input id="mapDescriptionInput" placeholder="Description text..." />
      <label>Display Text</label>
      <input id="mapDisplayInput" placeholder="Optional friendly label..." />
      <label>Category</label>
      <input id="mapCategoryInput" placeholder="Category..." />
      <button id="saveMappingBtn">ğŸ’¾ Save Mapping</button>
    </div>

    <h3>Saved Mappings</h3>
    <table id="mappingTable">
      <thead>
        <tr><th>Description</th><th>Category</th><th>Display</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <footer>
    <p>Â© 2025 Budget Tracker</p>
  </footer>

  <!-- Modular JavaScript Imports -->
  <script type="module">
    import "./js/utils.js";
    import "./js/auth.js";
    import "./js/transactions.js";
    import "./js/mappings.js";
    import "./js/import-export.js";
    import "./js/charts.js";
    import "./js/main.js";
  </script>
</body>
</html>